<script>
    import { onMount } from "svelte";
    import { push } from 'svelte-spa-router'

    let progress = 0;
    let completedChecks = [];
    let totalChecks = 5; // Example total number of checks
  
    function simulateAnalysis() {
      let completed = 0;
      const interval = setInterval(() => {
        if (completed < totalChecks) {
          completed++;
          progress = (completed / totalChecks) * 100;
          completedChecks = [...completedChecks, `취약점 ${completed} 검사 완료`];
        } else {
          clearInterval(interval);
          push('/result');
        }
      }, 1000); // Simulate each check taking 1 second
    }
  
    onMount(() => {
      simulateAnalysis();
    });
</script>
  
<style>
    .container {
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: white;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      margin-top: 50px;
      font-family: "Orbitron", sans-serif;
    }
  
    .progress-bar {
      width: 100%;
      background-color: #e0e0e0;
      border-radius: 25px;
      margin: 20px 0;
    }
  
    .progress-bar-inner {
      height: 25px;
      width: 0;
      background-color: #76c7c0;
      border-radius: 25px;
      text-align: center;
      line-height: 25px;
      color: white;
    }
  
    .completed-checks {
      margin-top: 20px;
    }
  
    .completed-check {
      margin-bottom: 10px;
    }
</style>
  
<div class="container">
    <h1>분석 진행 중...</h1>

    <div class="progress-bar">
        <div class="progress-bar-inner" style="width: {progress}%;">
        {Math.round(progress)}%
        </div>
    </div>

    <div class="completed-checks">
        {#each completedChecks as check}
        <div class="completed-check">{check}</div>
        {/each}
    </div>
</div>
  